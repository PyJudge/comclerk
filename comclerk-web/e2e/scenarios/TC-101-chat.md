# TC-101: 채팅 기능 E2E 테스트 시나리오

## 개요
워크스페이스 채팅 패널의 전체 기능을 검증하는 E2E 테스트

## 사전 조건
- 백엔드 서버 실행 중 (http://localhost:4096)
- 프론트엔드 서버 실행 중 (http://localhost:3000 또는 4000)
- Anthropic provider 연결됨
- reader, writer 에이전트 활성화 (mode: primary)

## 테스트 케이스

### TC-101-01: 채팅 패널 기본 요소 확인
**목적**: 채팅 패널의 필수 UI 요소가 렌더링되는지 확인
**단계**:
1. /workspace 페이지로 이동
2. 채팅 헤더 "채팅" 텍스트 확인
3. "새 채팅" 버튼 확인

**기대 결과**: 모든 요소가 표시됨

### TC-101-02: 모델 선택기 확인
**목적**: 모델 선택 드롭다운이 정상 작동하는지 확인
**단계**:
1. 모델 선택기 버튼 확인
2. 로딩 완료 후 모델명 표시 확인
3. 클릭 시 드롭다운 열림 확인

**기대 결과**: 연결된 provider의 모델 목록이 표시됨

### TC-101-03: 에이전트 선택기 - 기본값 확인
**목적**: 첫 번째 에이전트(reader)가 기본 선택되는지 확인
**단계**:
1. 에이전트 선택기 로드 대기
2. reader 버튼의 data-selected 속성 확인
3. writer 버튼의 data-selected 속성 확인

**기대 결과**:
- reader: data-selected="true"
- writer: data-selected="false"

### TC-101-04: 에이전트 클릭 변경
**목적**: 에이전트 버튼 클릭으로 에이전트 변경이 되는지 확인
**단계**:
1. writer 버튼 클릭
2. writer의 data-selected="true" 확인
3. reader의 data-selected="false" 확인

**기대 결과**: 클릭한 에이전트가 선택됨

### TC-101-05: 메시지 입력창 확인
**목적**: 메시지 입력 UI가 정상 동작하는지 확인
**단계**:
1. textarea 입력창 표시 확인
2. 에이전트 로드 후 입력창 활성화 확인
3. placeholder 텍스트 확인
4. 전송 버튼 표시 확인

**기대 결과**: 입력창이 활성화되고 placeholder에 에이전트명 표시

### TC-101-06: 전송 버튼 활성화
**목적**: 메시지 입력 시 전송 버튼이 활성화되는지 확인
**단계**:
1. 초기 전송 버튼 비활성화 확인
2. 메시지 텍스트 입력
3. 전송 버튼 활성화 확인

**기대 결과**: 텍스트 입력 시 전송 버튼이 활성화됨

### TC-101-07: 메시지 전송 (버튼 클릭)
**목적**: 전송 버튼 클릭으로 메시지가 전송되는지 확인
**단계**:
1. 테스트 메시지 입력
2. 전송 버튼 클릭
3. 입력창 비워짐 확인
4. 메시지가 화면에 표시되는지 확인 (optimistic update)

**기대 결과**:
- 입력창이 비워짐
- 메시지가 메시지 목록에 표시됨

### TC-101-08: Enter 키로 전송
**목적**: Enter 키로 메시지가 전송되는지 확인
**단계**:
1. 테스트 메시지 입력
2. Enter 키 입력
3. 입력창 비워짐 확인
4. 메시지 표시 확인

**기대 결과**: Enter 키로 전송됨

### TC-101-09: Shift+Enter 줄바꿈
**목적**: Shift+Enter로 줄바꿈이 되는지 확인 (전송되지 않음)
**단계**:
1. 첫 번째 줄 입력
2. Shift+Enter 입력
3. 두 번째 줄 입력
4. 입력창에 줄바꿈 포함 텍스트 확인

**기대 결과**: 줄바꿈이 포함된 텍스트가 입력창에 유지됨

### TC-101-10: Tab 키로 에이전트 전환
**목적**: Tab 키로 에이전트가 순환 변경되는지 확인
**단계**:
1. 입력창에 포커스
2. Tab 키 입력
3. 에이전트 변경 확인 (reader → writer)

**기대 결과**: Tab 키로 다음 에이전트로 전환됨

### TC-101-11: 새 채팅 버튼
**목적**: 새 채팅 버튼이 동작하는지 확인
**단계**:
1. 새 채팅 버튼 클릭
2. 토스트 메시지 "새 채팅을 시작합니다" 확인

**기대 결과**: 새 세션이 생성되고 토스트 표시

## 테스트 실행
```bash
cd comclerk-web
bunx playwright test e2e/TC-101-chat.spec.ts
```

## 스크린샷 저장 위치
`e2e/screenshots/TC-101-*.png`
